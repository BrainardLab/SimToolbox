function  HypSpectralCorrImages(rawImageDir,rawImageRoot,corrImageDir,S,width,height,type,originalPlatform,refSpectra,refLocs)% HypSpectralCorrImages(rawImageDir,rawImageRoot,corrImageDir,S_hyperspectral,width,height,type,originalPlatform,refSpectra,refLocs)%% Compute the mean values in the images at the refspectrum location,% in order to calibrate the set of hyperspectral images.% Saves a Means.mat file to be used later on to compute factors in the% hyperSpectral structure.%% 05/19/00 pxl       Wrote it separatly from the affine correction code    refSize = 6;% Store current directoryprevDir = pwd;cd(rawImageDir);for i = 1:S(3)  theImage = SimReadRawImage([rawImageRoot num2str(S(1)+(i-1)*S(2))],width,height,type,originalPlatform);  xCenter = refLocs(1);  yCenter = refLocs(2);  means(i) = mean(mean(theImage(yCenter-refSize/2:yCenter+ ...				     refSize/2,xCenter-refSize/2:xCenter+refSize/2)));endmeans = means';cd(prevDir);cd(corrImageDir);save refSpectra refSpectrasave Means meanscd(prevDir);