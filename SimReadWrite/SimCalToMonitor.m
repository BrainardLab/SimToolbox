function [monitor] = SimCalToMonitor(fileName)% [monitor] = SimCalToMonitor(fileName)%% Reads a psychtoolbox monitor description from the file and fill in the structure.% for simulator toolbox use.%% 8/15/03  dhb  Wrote it.% 2/10/07  dhb  Add comment field.  Remove fields SimToolbox write can't handle. %          dhb  Add a default height and width.% Copyright (c) 2003-2007 David Brainard.   All rights reserved.% Argument checkif (nargin < 1)    error('SimCalToMonitor: requires a cal file');end% Open the filemonitor = LoadCalFile(fileName);% Fill in some SimToolbox fields that aren't typically in the Psychtoolbox% cal files.monitor.manufacturer = 'Psychtoolbox Calibration';monitor.name = monitor.describe.monitor;%monitor.rawGammaInput = monitor.rawdata.rawGammaInput;%monitor.rawGammaTable = monitor.rawdata.rawGammaTable;monitor.wavelengthSampling = MakeItStruct(monitor.S_device);monitor.comments = sprintf('Created by SimCalToMonitor from calibration file %s',fileName);% Remove some fields that the simulator toolbox doesn't know how to handleif (isfield(monitor,'describe'))    monitor = rmfield(monitor,'describe');endif (isfield(monitor,'manual'))    monitor = rmfield(monitor,'manual');endif (isfield(monitor,'rawdata'))    monitor = rmfield(monitor,'rawdata');end% Default height and widthmonitor.height = 768;monitor.width = 1024;