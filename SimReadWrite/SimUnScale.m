function [Simout] = SimUnScale(Simin,minval,maxval)% Simout = SimUnScale(Simin,minval,maxval)%% Undoes affine scaling to put the image% back in its original format.  Assumes [0-1]% Simin convention.%% 10/29/98  dhb  Added some comments.% Copyright (c) 1999 David Brainard and Philippe Longere.   All rights reserved.if (isstruct(Simin))  Simout = Simin;  [x y z]=size(Simin.images);   Simout.images = reshape(Simin.images,x*y,z);  Simout.images = Simout.images * (maxval-minval) + minval;  Simout.images = reshape(Simout.images,x,y,z);else  [x y z]=size(Simin);   Simin=reshape(Simin,x*y,z);  Simout = Simin * (maxval-minval) + minval;  Simout=reshape(Simout,x,y,z);end