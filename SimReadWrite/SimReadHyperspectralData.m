function [image] = SimReadHyperspectralData(image)% [image] = SimReadHyperspectralData(image)%% Reads in hyperspectral data and converts to energy units% by multiplying with imageFactors.%% 4/26/99  dhb, pc  Wrote it.% 5/4/99   dhb      Wrote it.% Check image typeif (image.type ~= 'hyperspectral')	error('SimReadHyperspectral: only operates on hyperspectral images\n');endif (image.unit ~= 'Disk')	error('SimReadHyperspectral: input image units are not ''Disk'''\n');end% Change to data directory.prevDir = pwd;eval(['cd(''' image.rawImageDir ''');']);% Create space for output image image.images = zeros(image.height,image.width,image.wavelengthSampling.numberSamples);% Now read and put into energy units.for l = 0: image.wavelengthSampling.numberSamples-1   fname = [image.imageRoot num2str(400+l*10)];  image.images(:,:,l+1) = SimReadRawImage(fname,image.height,image.width)* ...  	image.imageFactors(l+1);endimage.unit = 'Power';