function [image] = SimHyperPowerToQuanta(image)% [image] = SimHyperPowerToQuanta(image)%% Convert hyperspectral image dota from power to% quantal units%% 4/26/99  dhb, pc  Wrote it.% 5/4/99   dhb      Change name, work with Simulator structures.% Check image typeif (image.type ~= 'hyperspectral')	error('SimReadHyperspectral: only operates on hyperspectral images\n');endif (image.unit ~= 'Power')	error('SimReadHyperspectral: input image units are not ''power'''\n');end% Too slick for words ...S = [inputImage.wavelengthSampling.start ...     inputImage.wavelengthSampling.step ...     inputImage.wavelengthSampling.numberSamples]; factors = EnergyToQuanta(SToWls(S),eye(length(wls)));image.images = SimApplyColorTransform(factors,image.images);image.unit = 'Quanta';